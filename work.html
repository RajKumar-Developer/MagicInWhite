<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/svg+xml" href="/icon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.css" />

    <style>
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Lato', sans-serif;
        }

        .bg-horse {
            background-image: url('/our_works/work_banner.gif');
            background-size: cover;
            background-repeat: no-repeat;
            background-position: top;
            min-height: 65dvh;
        }

        [data-scroll-container] {
            opacity: 1 !important;
            visibility: visible !important;
        }

        .green {
            color: #22c55e;
        }


        /* Hide scrollbar but keep scrolling functionality */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
            /* Chrome, Safari, and Edge */
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            /* Internet Explorer 10+ */
            scrollbar-width: none;
            /* Firefox */
        }
    </style>
</head>

<body oncontextmenu="return false;" data-scroll-container>
    <!-- Navbar -->
    <nav id="navbar"
        class="bg-transparent sm:bg-transparent transition-transform duration-500 ease-in-out opacity-100 fixed w-full top-0 left-0 px-5 z-50">
        <div class="flex py-2 justify-between items-center w-full max-w-full mx-auto">
            <!-- Logo (Left Corner) -->
            <div class="cursor-pointer" onclick="window.location.href='/index.html'">
                <img id="logo-img" src="/work assets/logo.png" alt="logo"
                    class="w-8 h-8 sm:w-12 sm:h-12 md:w-14 md:h-14">
            </div>

            <!-- Mobile Menu Button (Right Corner) -->
            <button id="menu-btn" class="hover:text-yellow-400 transition duration-300">
                <img id="menu-icon" src="/work assets/burger menu.png" alt="nav button"
                    class="w-7 h-6 sm:w-9 sm:h-8 md:w-9 md:h-8">
            </button>
        </div>
    </nav>
    <!-- Mobile Popup Menu (Overlay) -->
    <div id="mobile-menu"
        class="fixed top-0 left-0 w-full h-full bg-[#ffd527] flex flex-col justify-center items-center text-[#2025f8] text-xl uppercase tracking-widest z-50 hidden">
        <!-- Close Button -->
        <button id="close-menu"
            class="absolute top-6 right-6 text-4xl font-bold text-[#2025f8] transition duration-300">
            âœ–
        </button>

        <!-- Menu Items -->

        <ul class="text-center leading-[2.5rem]">
            <li class="mt-2 pb-3">
                <a href="/index.html"
                    class="text-2xl font-thin transition-transform duration-500 ease-out hover:scale-125 hover:font-bold font-normal block">
                    H O M E
                </a>
            </li>
            <li class="mt-2 pb-3">
                <a href="/work.html"
                    class="text-black-700 font-bold text-2xl transition-transform duration-500 ease-out scale-125 hover:scale-125 hover:font-bold block green">
                    W O R K
                </a>
            </li>
            <li class="mt-2 pb-3">
                <a href="/aboutus.html"
                    class="text-2xl font-thin transition-transform duration-500 ease-out hover:scale-125 hover:font-bold font-normal block">
                    A B O U T
                </a>
            </li>
            <li class="mt-2 pb-3">
                <a href="/service.html"
                    class="text-2xl font-thin transition-transform duration-500 ease-out hover:scale-125 hover:font-bold font-normal block">
                    S E R V I C E S
                </a>
            </li>
            <li class="mt-2 pb-3">
                <a href="/team.html"
                    class="text-2xl font-thin transition-transform duration-500 ease-out hover:scale-125 hover:font-bold font-normal block">
                    T E A M
                </a>
            </li>
            <li class="mt-2 pb-3">
                <a href="/contactus.html"
                    class="text-2xl font-thin transition-transform duration-500 ease-out hover:scale-125 hover:font-bold font-normal block">
                    C O N T A C T
                </a>
            </li>
        </ul>
    </div>

    <!--Main Content-->
    <!-- Main Page -->
    <section class="relative w-full flex items-end justify-end bg-black bg-horse" data-scroll-section>
        <!-- Overlay with dark blue -->
        <div class="absolute inset-0 bg-blue-950 opacity-50"></div>

        <div class="relative text-white text-right pr-20 max-[496px]:pr-[40px] max-[630px]:pl-[20px] pb-20">
            <h1 class="text-4xl sm:text-6xl font-normal">OUR WORK</h1>
            <p class="mt-4 max-w-2xl max-w-[50dvh] font-thin text-justify" dir="rtl">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque nunc felis.
                Morbi dui turpis, facilisis vitae ullam sit amet, bibendum bibendum dui.
                Etiam volut eu est ut viverra. Mattis non magna sit amet, blandit sceler nibh.
                Praesent vitae purus ut elit ultricies finibus eu ut dui. Cras non laoreet augue. Morbi.
            </p>
        </div>
    </section>
    <!-- Section work gallery -->
    <section id="horizontal-scroll" class="scroll-container" data-scroll-section>
        <div id="scrollable-div" class="overflow-x-scroll whitespace-nowrap flex space-x-4 p-4 no-scrollbar">

            <div class="relative group h-[80vh] w-[3/4] flex-shrink-0 cursor-pointer each-section">
                <img src="/our_works/Advertising.webp" class="h-full w-full object-cover" alt="Image">
                <div
                    class="absolute inset-0 bg-green-500 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white text-lg font-thin lato-font">
                    Advertising
                </div>
            </div>
            <div class="relative group h-[80vh] w-[3/4] flex-shrink-0 cursor-pointer each-section">
                <img src="/our_works/Branding.webp" class="h-full w-full object-cover" alt="Image">
                <div
                    class="absolute inset-0 bg-green-500 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white text-lg font-thin lato-font">
                    Branding
                </div>
            </div>
            <div class="relative group h-[80vh] w-[3/4] flex-shrink-0 cursor-pointer each-section">
                <img src="/our_works/Events.webp" class="h-full w-full object-cover" alt="Image">
                <div
                    class="absolute inset-0 bg-green-500 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white text-lg font-thin lato-font">
                    Events
                </div>
            </div>
            <a href="/movie-poster.html"
                class="relative group h-[80vh] w-[3/4] flex-shrink-0 cursor-pointer each-section">
                <img src="/our_works/MoviePosters.webp" class="h-full w-full object-cover" alt="Image">
                <div
                    class="absolute inset-0 bg-green-500 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white text-lg font-thin lato-font">
                    Movie Posters
                </div>
            </a>
            <div class="relative group h-[80vh] w-[3/4] flex-shrink-0 cursor-pointer each-section">
                <img src="/our_works/Products.webp" class="h-full w-full object-cover" alt="Image">
                <div
                    class="absolute inset-0 bg-green-500 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white text-lg font-thin lato-font">
                    Products
                </div>
            </div>
            <div class="relative group h-[80vh] w-[3/4] flex-shrink-0 cursor-pointer each-section">
                <img src="/our_works/TItleAnimations.webp" class="h-full w-full object-cover" alt="Image">
                <div
                    class="absolute inset-0 bg-green-500 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white text-lg font-thin lato-font">
                    TItle Animations
                </div>
            </div>
        </div>
    </section>
    <!--Footer-->
    <section data-scroll-section
        class="min-h-1/2 flex flex-col justify-center items-center bg-[#00001b] text-white text-center p-10">
        <div class="container">
            <div class="w-full max-w-4xl mx-auto mt-6">
                <!-- Heading + Input Field -->
                <h1 class="text-xl md:text-3xl font-bold mb-4 text-left">LETS BE CREATIVE. LETS BEGIN.</h1>
                <div class="flex">
                    <input type="email" placeholder="ENTER YOUR EMAIL ADDRESS"
                        class="p-4 w-full text-lg text-gray-600 outline-none bg-white" />
                    <button class="bg-pink-500 px-8 py-4 text-lg text-white font-semibold">SUBSCRIBE</button>
                </div>

                <div class="mt-10 grid grid-cols-1 gap-y-6 w-full">
                    <!-- First Row: Lists (Grid of 5 Items) -->
                    <div
                        class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-5 gap-x-6 gap-y-6 w-full text-left md:text-left">
                        <div class="w-full order-1 md:order-none">
                            <h3 class="font-semibold">HOME</h3>
                            <ul class="space-y-1">
                                <li>Why us</li>
                            </ul>
                        </div>
                        <div class="w-full">
                            <h3 class="font-semibold">WORK</h3>
                            <ul class="space-y-1">
                                <li>Film Posters</li>
                                <li>Events</li>
                                <li>Title Animations</li>
                                <li>Branding</li>
                                <li>Products</li>
                                <li>Advertising</li>
                            </ul>
                        </div>
                        <div class="w-full">
                            <h3 class="font-semibold">SERVICE</h3>
                            <ul class="space-y-1 text-sm pt-3">
                                <li class="whitespace-nowrap">Branding</li>
                                <li class="whitespace-nowrap">Advertising</li>
                                <li class="whitespace-nowrap">Film Production</li>
                                <li class="whitespace-nowrap">Graphic Design</li>
                                <li class="whitespace-nowrap">Social Media Marketing</li>
                                <li class="whitespace-nowrap">Integrated Marketing</li>
                            </ul>
                        </div>
                        <div class="w-full">
                            <h3 class="font-semibold">TEAM</h3>
                            <ul class="space-y-1">
                                <li>Meet the Team</li>
                            </ul>
                        </div>
                        <div class="w-full">
                            <h3 class="font-semibold">CONTACT</h3>
                            <ul class="space-y-1">
                                <li>Contact Information</li>
                                <li>Careers</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Second Row: Button & Social Media Icons -->
                    <div class="flex flex-col sm:flex-row justify-between items-center w-full space-y-4 sm:space-y-0">
                        <button id="shareButton"
                            class="bg-[#00001b] border border-white px-6 py-3 text-lg text-white font-semibold flex items-center gap-2">
                            <img src="/footer-png/share-button.png" alt="Share Icon" class="w-6 h-6"> Share this Website
                        </button>


                        <!-- Social Icons -->
                        <div class="flex flex-wrap justify-center sm:justify-end gap-4">
                            <a href="#"
                                class="w-10 h-10 flex items-center justify-center border-2 border-white rounded-full text-white text-xl">
                                <i class="fa-brands fa-x-twitter"></i>
                            </a>
                            <a href="#"
                                class="w-10 h-10 flex items-center justify-center border-2 border-white rounded-full text-white text-xl">
                                <i class="fa-brands fa-facebook-f"></i>
                            </a>
                            <a href="#"
                                class="w-10 h-10 flex items-center justify-center border-2 border-white rounded-full text-white text-xl">
                                <i class="fab fa-youtube"></i>
                            </a>
                            <a href="#"
                                class="w-10 h-10 flex items-center justify-center border-2 border-white rounded-full text-white text-xl">
                                <i class="fa-brands fa-instagram"></i>
                            </a>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </section>

    <!-- loader -->
    <div id="loader"
        class="fixed inset-0 bg-white flex items-center justify-center z-[9999999] transition-opacity duration-1000 opacity-100">
        <img id="logo-img" src="/MIW_Website_Assets/loader_horse.gif" alt="loader" class="w-20 h-20 object-contain">
    </div>
    <!--loader end  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.js"></script>
    <script src="https://unpkg.com/imagesloaded@5/imagesloaded.pkgd.min.js"></script>

    <script>
        let locoScrollInstance;

        document.addEventListener("readystatechange", () => {
            if (document.readyState === "complete") {
                document.getElementById("loader").classList.add("hidden");
            }
        });
        document.getElementById("shareButton").addEventListener("click", async () => {
            if (navigator.share) {
                await navigator.share({
                    title: "Check out this website!",
                    url: window.location.href
                });
            } else {
                alert("Your browser does not support sharing.");
            }
        });
        const menuBtn = document.getElementById('menu-btn');
        const closeMenuBtn = document.getElementById('close-menu');
        const mobileMenu = document.getElementById('mobile-menu');

        menuBtn.addEventListener('click', () => {
            mobileMenu.classList.remove('hidden');
            mobileMenu.classList.add('flex');
        });

        closeMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.add('hidden');
        });

        // Close menu when clicking outside of it
        mobileMenu.addEventListener('click', (e) => {
            if (e.target === mobileMenu) {
                mobileMenu.classList.add('hidden');
            }
        });
        gsap.registerPlugin(ScrollTrigger);

        // image on load effect
        gsap.utils.toArray(".group").forEach((group) => {
            let img = group.querySelector("img");
            let overlay = group.querySelector("div");

            // Disable hover effects initially
            group.classList.add("pointer-events-none");

            gsap.from(img, {
                clipPath: "inset(30%)",
                opacity: 0,
                duration: 1.5,
                ease: "power2.out",
                onComplete: () => {
                    // Enable hover after animation finishes
                    group.classList.remove("pointer-events-none");
                }
            });
        });

        const scrollContainer = document.querySelector("[data-scroll-container]");

        function initSmoothScroll() {

            const locoScroll = new LocomotiveScroll({
                el: scrollContainer,
                smooth: true,
                smoothMobile: true,
                inertia: 0.60,
                multiplier: 2,
                getDirection: true
            });
            locoScrollInstance = locoScroll;

            ScrollTrigger.scrollerProxy(scrollContainer, {
                scrollTop(value) {
                    return arguments.length
                        ? locoScroll.scrollTo(value, 0, 0)
                        : locoScroll.scroll.instance.scroll.y;
                },
                getBoundingClientRect() {
                    return {
                        top: 0,
                        left: 0,
                        width: window.innerWidth,
                        height: window.innerHeight,
                    };
                },
                pinType: scrollContainer.style.transform ? "transform" : "fixed",
            });
            let lastScrollY = locoScrollInstance ? locoScrollInstance.scroll.instance.scroll.y : 0;

            locoScroll.on("scroll", (event) => {
                checkBackgroundAndInvertImages();
                const navbar = document.getElementById("navbar");
                const currentScrollY = locoScrollInstance ? locoScrollInstance.scroll.instance.scroll.y : 0;

                if (currentScrollY > lastScrollY && currentScrollY > 100) {
                    // Scrolling down - Hide navbar with animation
                    navbar.classList.add("-translate-y-full", "opacity-0");
                    navbar.classList.remove("opacity-100");
                } else {
                    // Scrolling up - Show navbar with animation
                    navbar.classList.remove("-translate-y-full", "opacity-0");
                    navbar.classList.add("opacity-100");
                }

                lastScrollY = currentScrollY;

                ScrollTrigger.update();
            });

            // locoScroll.on("scroll", ScrollTrigger.update);
            ScrollTrigger.addEventListener("refresh", () => locoScroll.update());
            ScrollTrigger.refresh();
            requestAnimationFrame(() => {
                ScrollTrigger.refresh();
            });
        }

        // horizontal scroll
        const scrollable = document.getElementById('scrollable-div');
        let isLocoStopped = false;
        let startX = 0;

        // Check if the element is in the viewport
        const isMobile = window.innerWidth <= 768;
        const offset = isMobile ? 300 : 550;

        function isInView(el) {
            const rect = el.getBoundingClientRect();
            return rect.top <= offset && rect.bottom > 0;
        }


        // Check if horizontal scroll reached start
        function isAtStart(el) {
            return el.scrollLeft <= 0;
        }

        // Check if horizontal scroll reached end
        function isAtEnd(el) {
            return el.scrollLeft + el.offsetWidth >= el.scrollWidth - 1;
        }

        function stopLoco() {
            if (!isLocoStopped) {
                locoScrollInstance.stop();
                isLocoStopped = true;
            }
        }

        function startLoco() {
            if (isLocoStopped) {
                locoScrollInstance.start();
                isLocoStopped = false;
            }
        }

        // Desktop: Handle wheel scrolling
        document.addEventListener("wheel", (e) => {
            if (!isInView(scrollable)) return;

            const isScrollingDown = e.deltaY > 0;
            const isScrollingUp = e.deltaY < 0;

            stopLoco(); // always stop loco when in view
            e.preventDefault();

            // scrollable.scrollBy({ left: e.deltaY, behavior: 'smooth' });
            gsap.to(scrollable, {
                scrollLeft: scrollable.scrollLeft + e.deltaY,
                duration: 0.1,
                ease: "power2.out"
            });

            if ((isScrollingDown && isAtEnd(scrollable)) || (isScrollingUp && isAtStart(scrollable))) {
                startLoco();
            }
        }, { passive: false });


        // // Mobile: Handle touch horizontal scroll
        // scrollable.addEventListener("touchstart", (e) => {
        //     startX = e.touches[0].clientX;
        // }, { passive: true });

        // scrollable.addEventListener("touchmove", (e) => {
        //     if (!isInView(scrollable)) return;

        //     const currentX = e.touches[0].clientX;
        //     const deltaX = startX - currentX;

        //     stopLoco();

        //     // Prevent vertical scroll
        //     if (e.cancelable) e.preventDefault();

        //     scrollable.scrollLeft += deltaX;
        //     startX = currentX;

        //     if ((deltaX > 0 && isAtEnd(scrollable)) || (deltaX < 0 && isAtStart(scrollable))) {
        //         startLoco();
        //     }
        // }, { passive: false });

        window.addEventListener("load", () => {
            imagesLoaded(scrollContainer, { background: true }, () => {
                initSmoothScroll();
            });
        });

    </script>
    <script>
        // Enhanced function to check background section color and invert images if needed
        function checkBackgroundAndInvertImages() {
            const navbar = document.getElementById('navbar');
            const logo = document.getElementById('logo-img');
            const menuIcon = document.getElementById('menu-icon');

            // Get the scroll position to determine what section we're on
            const scrollY = window.scrollY;

            // Get elements that navbar might be overlapping
            const sections = document.querySelectorAll('section');
            let currentSection = null;

            // Find which section the navbar is currently overlapping
            for (const section of sections) {
                const rect = section.getBoundingClientRect();
                // If the navbar is within the top portion of this section
                if (rect.top <= 80 && rect.bottom > 0) {
                    currentSection = section;
                    break;
                }
            }

            // If we found a current section, get its background color
            if (currentSection) {
                const sectionBgColor = window.getComputedStyle(currentSection).backgroundColor;
                const sectionBgImage = window.getComputedStyle(currentSection).backgroundImage;

                // Check if this is a section where we need to invert
                if (needsInversion(sectionBgColor, sectionBgImage)) {
                    logo.style.filter = "invert(1)";
                    menuIcon.style.filter = "invert(1)";
                } else {
                    logo.style.filter = "none";
                    menuIcon.style.filter = "none";
                }
            }
        }

        // Enhanced function to determine if inversion is needed
        function needsInversion(backgroundColor, backgroundImage) {
            // If there's a background image that's not "none", we might need special handling
            const hasBackgroundImage = backgroundImage && backgroundImage !== "none";

            // Get the logo and menu icon color (you may need to define these explicitly)
            // For example, if your logo is black (#000000) or close to it:
            const logoColor = { r: 0, g: 0, b: 0 }; // Assuming black logo

            // Parse the backgroundColor to get RGB values
            const rgbValues = backgroundColor.match(/\d+/g);

            if (!rgbValues || rgbValues.length < 3) {
                // If we can't parse the color, default behavior based on section
                return hasBackgroundImage || isKnownDarkSection(backgroundColor);
            }

            const r = parseInt(rgbValues[0]);
            const g = parseInt(rgbValues[1]);
            const b = parseInt(rgbValues[2]);

            // Calculate color similarity between background and logo
            const colorSimilarity = calculateColorSimilarity(
                { r, g, b },
                logoColor
            );

            // Calculate the perceived brightness
            const brightness = (0.299 * r + 0.587 * g + 0.114 * b);

            // If colors are similar OR background is dark, invert
            return colorSimilarity > 85 || brightness < 128;
        }

        // Calculate how similar two colors are (0-100%)
        function calculateColorSimilarity(color1, color2) {
            // Calculate the Euclidean distance in RGB space
            const distance = Math.sqrt(
                Math.pow(color1.r - color2.r, 2) +
                Math.pow(color1.g - color2.g, 2) +
                Math.pow(color1.b - color2.b, 2)
            );

            // Convert to a similarity percentage (0-100)
            // Max distance in RGB space is âˆš(255Â² + 255Â² + 255Â²) â‰ˆ 441.7
            return 100 - (distance / 441.7 * 100);
        }

        // Helper function for known dark sections
        function isKnownDarkSection(backgroundColor) {
            // List of sections we know should have inverted logo/menu
            const darkSectionColors = [
                "rgb(34, 38, 247)",    // Blue section (#2226f7)
                "rgb(0, 0, 0)",        // Black section
                "rgb(34, 34, 34)"      // Dark gray section
            ];

            return darkSectionColors.includes(backgroundColor);
        }

        // Run on page load
        document.addEventListener('DOMContentLoaded', function () {

            // Run on window resize
            window.addEventListener('resize', checkBackgroundAndInvertImages);

            // Observe changes to the navbar element
            const observer = new MutationObserver(checkBackgroundAndInvertImages);
            observer.observe(document.getElementById('navbar'), { attributes: true, attributeFilter: ['class'] });
        });
    </script>
</body>

</html>